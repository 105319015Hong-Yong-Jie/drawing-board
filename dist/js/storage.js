"use strict";function item(t,a){var i='<div class="itemsDiv"><div class="item"><img src = '+t+' id="history_'+a+'"/><a href="javascript:void(0);" id="history_del_'+a+'">删除</a><a href="'+t+'" id="history_download_'+a+'" download="picture.png">下载</a></div></div>';$("#showHistory h2").after(i).fadeIn(400)}var putStorage=function(t,a){window.localStorage.setItem(t,a)},getStorage=function(t){return window.localStorage.getItem(t)},removeStorage=function(t){window.localStorage.removeItem(t)},callBackStorage=function(t){initHistorty()},initHistorty=function(){for(var t=1;t<25;t++){var a=getStorage(t);null!=a&&""!=a&&item(a,t)}},save=function(){for(var t=1;t<=100;t++){var a=getStorage(t);if(null==a||""==a)return putStorage(t,canvas.toDataURL()),void item(canvas.toDataURL(),t)}};$(function(){window.addEventListener?window.addEventListener("storage",callBackStorage,!1):window.attachEvent("onstorage",callBackStorage),initHistorty(),$(".item a").live("click",function(){var t=$(this).attr("id");if("-1"!=t.indexOf("del")){var a=t.substring(t.length-1);removeStorage(a),$(this).parent().fadeOut(200,function(){$(this).remove()})}})});