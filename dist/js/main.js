"use strict";function init(){Pencil(),setLineWidth(2),initDrag()}function handleDragOver(e){e.stopPropagation(),e.preventDefault()}function isImage(e){switch(e){case"image/jpeg":case"image/png":case"image/gif":case"image/bmp":case"image/jpg":return!0;default:return!1}}function handleFileSelect(e){e.stopPropagation(),e.preventDefault();for(var n,a=e.dataTransfer.files,i=0;n=a[i];i++){var d=n.type?n.type:"n/a";reader=new FileReader,isImg=isImage(d),isImg&&(reader.onload=function(e){return function(e){var n=new Image;n.src=e.target.result;var a,i,d=0,c=0,l=960,r=580,t=1,o=n.width,s=n.height;i=l/o,a=r/s,(i<1||a<1)&&(t=i<=a?i:a),t<1&&(o*=t,s*=t),d=(l-o)/2,c=(r-s)/2,n.onload=function(){ctx.drawImage(n,0,0,n.width,n.height,d,c,o,s)}}}(n),reader.readAsDataURL(n))}}$("#header ul.tool li.line").click(function(){$("#header .lineType").slideDown(300)}),$("#header .lineType p").click(function(){$(this).addClass("active").siblings().removeClass("active"),$("#header .lineType").slideUp(500)}),$("#header ul.tool li").click(function(){$(this).addClass("active").siblings().removeClass("active")}),$("#header ul.tool .lineType p").click(function(){$(this).addClass("active").siblings().removeClass("active")}),addEventHander(penType[0],"click",Pencil,!1),addEventHander(penType[1],"click",Pen,!1),addEventHander(penType[2],"click",Tuya,!1),addEventHander(lineType[0],"click",Line,!1),addEventHander(lineType[1],"click",Square,!1),addEventHander(lineType[2],"click",Circular,!1),addEventHander(lineType[3],"click",Poly,!1),addEventHander(lineType[4],"click",SquareFill,!1),addEventHander(lineType[5],"click",CircularFill,!1),addEventHander(lineType[6],"click",PolyFill,!1),addEventHander(colorType[0],"click",Color,!1),addEventHander(colorType[1],"click",FrontColor,!1),addEventHander(colorType[2],"click",Straw,!1),addEventHander(colorType[3],"click",Font,!1),addEventHander(colorType[4],"click",Eraser,!1),addEventHander(colorType[5],"click",Magnifier,!1),addEventHander(funcType[0],"click",Redo,!1),addEventHander(funcType[1],"click",CancelPrev,!1),addEventHander(funcType[2],"click",ClearSceen,!1),addEventHander(funcType[3],"click",Download,!1),addEventHander(funcType[4],"click",Saveimg,!1),addEventHander(lineWidths[0],"click",LineW1,!1),addEventHander(lineWidths[1],"click",LineW3,!1),addEventHander(lineWidths[2],"click",LineW5,!1),addEventHander(lineWidths[3],"click",LineW8,!1),window.onload=init;var initDrag=function(){var e=document.getElementById("canvas");e.addEventListener("dragover",handleDragOver,!1),e.addEventListener("drop",handleFileSelect,!1)};